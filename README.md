# これはなに？
SDで生成された画像ファイルを移動、コピーするためのシンプルなアプリです。\
選択したフォルダ内の画像ファイルを、**サブフォルダ内も含めて表示** します。\
空のサブフォルダがあったら削除します。\
SDのデフォルト設定で作成される日付ごとのフォルダをまとめてチェックすることを想定しています。\
コピーする際は、並べやすいようにファイル名の先頭に連番をつけます。\
対応している拡張子は`png` `jpeg` `webp` です。


## インストール
- ブランチ右上の **<>code** をクリック、 **Download ZIP** でダウンロード。
- パスに2バイト文字（日本語など）が含まれないフォルダに解凍。
- **ImageMoverRun.bat** を実行。
- **WindowsによってPCが保護されました** が表示される場合は **詳細情報** クリックで表示される実行をクリック。
- 依存ファイルインストール後、プログラムが起動します。
## 使い方
2回目以降の起動も**ImageMoverRun.bat** を実行します。
- 起動するとフォルダ選択ダイアログが表示されます。
- 画像が保存されたフォルダを選んで`フォルダの選択` を押します。SDのtxt2img-images等を想定しています。
- フォルダ内に空のサブフォルダがある場合、削除するか訊いてきます。削除するとゴミ箱に移動します。
- サムネが表示されます。
### 移動する
- サムネイルをクリックして選択状態にします。
- 選び終わったらウィンドウ下の `Move` をクリックします。
- 移動先のフォルダ選択ダイアログが表示されます。
- フォルダを選んで`フォルダの選択` を押すと移動します。
### コピーする
- ウィンドウ右上の `Copy Mode` をクリックします。ボタンが `Copy Mode Exit` に変わります。
- コピーしたいファイルを **コピーしたい順番に** クリックで選択します。選択されると番号が振られます。
- ウィンドウ右下の `Copy` をクリックします。
- フォルダ選択ダイアログが表示されます。
- コピー先のフォルダを選んで`フォルダの選択` を押すと、 `振られた番号3桁` + `_` + `元のファイル名` でコピーされます。
- コピー先にこのアプリでコピーされた連番付きのファイルがある場合、続きから番号が振り直されてコピーされます。
## その他の機能
- フォルダツリー　フォルダをクリックするとその中のファイルをサムネイルに表示。使わないときは `<<` クリックで非表示にしてサムネを1列増やす。
- `-` `+` サムネイルの列数変更。真ん中に現在の列数を表示。
- メタデータ検索
  - テキストボックス `,（カンマ）` 区切りで複数のテキスト入力可。空白でSearchを押すと検索解除。
  - and検索、or検索を切り替えるラジオボタン。
- サムネイル
  - 画像右クリックでメタデータ表示。
  - 画像ダブルクリックで拡大縮小可能な別ウィンドウ表示。

## 既知の問題
- 空のフォルダが入れ子になっていると最下層のフォルダしか削除されない。
- サムネイルは1000ファイルまで対応。超えるとどうなるか不明。25行目当たりの `def __init__(self, max_size=1000):` で変更可能。
